<!DOCTYPE HTML>
<html>
<head>  <meta charset="utf-8">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script></head>
	<body>
		<script>
			var m = [
			{
				text: 'Животные',
				childs: [
				{
					text: 'Млекопитающие',
					childs: [
					'Грызуны',
					'Рукокрылые',
					'Китообразные',
					'Ластоногие'
					]
				},
				{
					text: 'Рыбы',
					childs: [
					'Круглоротые',
					'Хрящевые рыбы',
					'Костные рыбы'
					]
				}
				]
			},
			{
				text: 'Растения',
				childs: [
				{
					text: 'Высшие растения',
					childs: [
					'Моховидные',
					'Плауновидные',
					'Хвощевидные',
					'Папоротниковидные',
					'Голосеменные',
					'Покрытосеменные'
					]
				},
				{
					text: 'Низшие растения',
					childs: [
					'Лишайники',
					'Зеленые водоросли',
					'Бурые водоросли',
					'Диатомовые водоросли',
					'Красные водоросли'
					]
				}
				]
			},
			{
				text: 'Грибы',
				childs: [
				{
					text: 'Одноклеточные',
					childs: [
					'Дрожжи'
					]
				},
				{
					text: 'Многоклеточные',
					childs: [
					{
						text: 'Плесневые',
						childs: [
						'Мукор',
						'Пеницилл'
						]
					},
					{					
						text: 'Шляпочные',
						childs: [
						'Трубчатые',
						'Пластинчатые'
						]
					}
					]
				}
				]
			},
			{
				text: 'Вирусы',
				childs: [
				{
					text: 'ДНК-вирусы',
					childs: [
					'Без оболочки',
					'С оболочкой'
					]
				},
				{
					text: 'РНК-вирусы',
					childs: [
					'Без оболочки',
					'С оболочкой'
					]
				}
				]
			},
			{
				text: 'Прокариоты',
				childs: [
				{
					text: 'Настоящие бактерии',
				},
				{
					text: 'Архебактерии',
				},
				{
					text: 'Оксифотобактерии',
				}
				]
			}
			]
			function generateList(childs) {
				let ul = $('<ul/>')
				for (let child of childs) {
					let li = $('<li/>')
					if (child.text !== undefined) 
						li.append(child.text)
					if (typeof child !== 'object')
						li.append(child)
					else if (child.childs !== undefined) 
						li.append(generateList(child.childs))
					li.on('click', function(e) {
						e.preventDefault()
						$(this.firstElementChild).slideToggle()
						console.log(this.firstChild.data, $(this).find("li").length)
						return false
					})
					ul.append(li)
				}
				return ul
			}
			$("body").append(generateList(m))
	</script>
</body>
</html>